## **线程死锁，解除线程死锁有哪几种方式？(两次栽倒这题上了，时间太久又忘记了，如何解决很重要)**

> 线程死锁描述的是这样一种情况：多个线程同时被阻塞，它们中的一个或者全部都在等待某个资源被释放。由于线程被无限期地阻塞，因此程序不可能正常终止。

> 如下图所示，线程 A 持有资源 2，线程 B 持有资源 1，他们同时都想申请对方的资源，所以这两个线程就会互相等待而进入死锁状态。
>
> [![img](https://camo.githubusercontent.com/6785f1ba4ee42c654ca9fddf8bc2dedbb264cc4bb612572bad578afc9e9db1ee/68747470733a2f2f6d6d62697a2e717069632e636e2f6d6d62697a5f706e672f696149645166457269633954796b33644f44426b7a357235624a4e6c477369615a5a4d777452596b34306e546f44317a7064666576646a36416f48715539554745304d353344785539724375497475754f62456c4d53474b512f3634303f77785f666d743d706e672674703d7765627026777866726f6d3d352677785f6c617a793d312677785f636f3d31)](https://camo.githubusercontent.com/6785f1ba4ee42c654ca9fddf8bc2dedbb264cc4bb612572bad578afc9e9db1ee/68747470733a2f2f6d6d62697a2e717069632e636e2f6d6d62697a5f706e672f696149645166457269633954796b33644f44426b7a357235624a4e6c477369615a5a4d777452596b34306e546f44317a7064666576646a36416f48715539554745304d353344785539724375497475754f62456c4d53474b512f3634303f77785f666d743d706e672674703d7765627026777866726f6d3d352677785f6c617a793d312677785f636f3d31)
>
> **解决死锁的策略**
>
> - 死锁预防
> - 死锁避免
> - 死锁检测
> - 死锁解除
>
> 1. **死锁预防：** 破坏导致死锁必要条件中的任意一个就可以预防死锁。 （1）**破坏占有和等待条件：** 一次性申请所有资源，之后不再申请资源，如果不满足资源条件则得不到资源分配。 （2）**破坏不可剥夺条件：** 当一个进程获得某个不可剥夺的资源时，提出新的资源申请，若不满足，则释放所有资源。 （3）**破坏循环等待条件：** 按某一顺序申请资源，释放资源则反序释放。
> 2. **死锁避免：** 进程在每次申请资源时判断这些操作是否安全。
> 3. **死锁检测：** 判断系统是否属于死锁的状态，如果是，则执行死锁解除策略。
> 4. **死锁解除：** 将某进程所占资源进行强制回收，然后分配给其他进程。（与死锁检测结合使用的）